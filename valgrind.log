==353213== Memcheck, a memory error detector
==353213== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==353213== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==353213== Command: ./ircserv 6667 pass
==353213== Parent PID: 353210
==353213== 
==353213== 
==353213== Process terminating with default action of signal 2 (SIGINT)
==353213==    at 0x4BD4D47: poll (poll.c:29)
==353213==    by 0x11CFDF: Server::server_loop() (Server.cpp:706)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== FILE DESCRIPTORS: 5 open (3 std) at exit.
==353213== Open AF_INET socket 4: 0.0.0.0:6667 <-> unbound
==353213==    at 0x4BE3CEB: socket (syscall-template.S:120)
==353213==    by 0x10BC2A: init_socket(char*) (main.cpp:52)
==353213==    by 0x10C1B7: main (main.cpp:98)
==353213== 
==353213== Open file descriptor 3: /home/pika/Desktop/ircserver/valgrind.log
==353213==    <inherited from parent>
==353213== 
==353213== 
==353213== HEAP SUMMARY:
==353213==     in use at exit: 80,189 bytes in 22 blocks
==353213==   total heap usage: 236 allocs, 214 frees, 118,329 bytes allocated
==353213== 
==353213== 16 bytes in 1 blocks are still reachable in loss record 1 of 13
==353213==    at 0x4849013: operator new(unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x1261C3: __gnu_cxx::new_allocator<pollfd>::allocate(unsigned long, void const*) (new_allocator.h:127)
==353213==    by 0x12506F: __gnu_cxx::__alloc_traits<std::allocator<pollfd>, pollfd>::allocate(std::allocator<pollfd>&, unsigned long) (alloc_traits.h:133)
==353213==    by 0x1239C9: std::_Vector_base<pollfd, std::allocator<pollfd> >::_M_allocate(unsigned long) (stl_vector.h:346)
==353213==    by 0x1219F6: std::vector<pollfd, std::allocator<pollfd> >::_M_realloc_insert(__gnu_cxx::__normal_iterator<pollfd*, std::vector<pollfd, std::allocator<pollfd> > >, pollfd const&) (vector.tcc:440)
==353213==    by 0x11FDF9: std::vector<pollfd, std::allocator<pollfd> >::push_back(pollfd const&) (stl_vector.h:1198)
==353213==    by 0x11D207: Server::server_loop() (Server.cpp:722)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 32 bytes in 1 blocks are still reachable in loss record 2 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4B63DC7: __libc_dynarray_emplace_enlarge (dynarray_emplace_enlarge.c:61)
==353213==    by 0x4C0D4BC: resolv_conf_array_add__ (dynarray-skeleton.c:281)
==353213==    by 0x4C0D4BC: resolv_conf_array_add (dynarray-skeleton.c:309)
==353213==    by 0x4C0D4BC: __resolv_conf_attach (resolv_conf.c:604)
==353213==    by 0x4C08577: __res_vinit (res_init.c:632)
==353213==    by 0x4C0D9FF: maybe_init (resolv_context.c:122)
==353213==    by 0x4C0D9FF: context_get (resolv_context.c:184)
==353213==    by 0x4C0D9FF: context_get (resolv_context.c:176)
==353213==    by 0x4C0D9FF: __resolv_context_get (resolv_context.c:195)
==353213==    by 0x4BF2D55: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:213)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 64 bytes in 1 blocks are still reachable in loss record 3 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4C11D27: __nss_action_allocate (nss_action.c:90)
==353213==    by 0x4C12254: __nss_action_parse (nss_action_parse.c:177)
==353213==    by 0x4C1289A: nss_database_select_default (nss_database.c:166)
==353213==    by 0x4C1289A: nss_database_reload (nss_database.c:368)
==353213==    by 0x4C1289A: nss_database_check_reload_and_get (nss_database.c:448)
==353213==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==353213==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 88 bytes in 1 blocks are still reachable in loss record 4 of 13
==353213==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4C0C9EE: get_locked_global (resolv_conf.c:94)
==353213==    by 0x4C0C9EE: get_locked_global (resolv_conf.c:86)
==353213==    by 0x4C0C9EE: __resolv_conf_get_current (resolv_conf.c:127)
==353213==    by 0x4C08564: __res_vinit (res_init.c:628)
==353213==    by 0x4C0D9FF: maybe_init (resolv_context.c:122)
==353213==    by 0x4C0D9FF: context_get (resolv_context.c:184)
==353213==    by 0x4C0D9FF: context_get (resolv_context.c:176)
==353213==    by 0x4C0D9FF: __resolv_context_get (resolv_context.c:195)
==353213==    by 0x4BF2D55: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:213)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 110 bytes in 1 blocks are still reachable in loss record 5 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4B640C8: __libc_alloc_buffer_allocate (alloc_buffer_allocate.c:26)
==353213==    by 0x4C0CE35: alloc_buffer_allocate (alloc_buffer.h:143)
==353213==    by 0x4C0CE35: __resolv_conf_allocate (resolv_conf.c:391)
==353213==    by 0x4C07EDA: __resolv_conf_load (res_init.c:599)
==353213==    by 0x4C0CA2E: __resolv_conf_get_current (resolv_conf.c:140)
==353213==    by 0x4C08564: __res_vinit (res_init.c:628)
==353213==    by 0x4C0D9FF: maybe_init (resolv_context.c:122)
==353213==    by 0x4C0D9FF: context_get (resolv_context.c:184)
==353213==    by 0x4C0D9FF: context_get (resolv_context.c:176)
==353213==    by 0x4C0D9FF: __resolv_context_get (resolv_context.c:195)
==353213==    by 0x4BF2D55: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:213)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 216 bytes in 1 blocks are still reachable in loss record 6 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4C12381: global_state_allocate (nss_database.c:54)
==353213==    by 0x4BE16AB: __libc_allocate_once_slow (allocate_once.c:28)
==353213==    by 0x4C12CE6: allocate_once (allocate_once.h:87)
==353213==    by 0x4C12CE6: nss_database_state_get (nss_database.c:73)
==353213==    by 0x4C12CE6: __nss_database_get (nss_database.c:471)
==353213==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==353213==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 272 bytes in 1 blocks are still reachable in loss record 7 of 13
==353213==    at 0x4849013: operator new(unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x1262E1: __gnu_cxx::new_allocator<User>::allocate(unsigned long, void const*) (new_allocator.h:127)
==353213==    by 0x1250F9: __gnu_cxx::__alloc_traits<std::allocator<User>, User>::allocate(std::allocator<User>&, unsigned long) (alloc_traits.h:133)
==353213==    by 0x123BF7: std::_Vector_base<User, std::allocator<User> >::_M_allocate(unsigned long) (stl_vector.h:346)
==353213==    by 0x121D5E: std::vector<User, std::allocator<User> >::_M_realloc_insert(__gnu_cxx::__normal_iterator<User*, std::vector<User, std::allocator<User> > >, User const&) (vector.tcc:440)
==353213==    by 0x11FEE2: std::vector<User, std::allocator<User> >::push_back(User const&) (stl_vector.h:1198)
==353213==    by 0x11D2A5: Server::server_loop() (Server.cpp:725)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 304 bytes in 5 blocks are still reachable in loss record 8 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4C11D27: __nss_action_allocate (nss_action.c:90)
==353213==    by 0x4C12254: __nss_action_parse (nss_action_parse.c:177)
==353213==    by 0x4C127A8: process_line (nss_database.c:232)
==353213==    by 0x4C127A8: nss_database_reload_1 (nss_database.c:294)
==353213==    by 0x4C127A8: nss_database_reload (nss_database.c:332)
==353213==    by 0x4C127A8: nss_database_check_reload_and_get (nss_database.c:448)
==353213==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==353213==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 544 bytes in 1 blocks are still reachable in loss record 9 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4C116BA: __nss_module_allocate (nss_module.c:88)
==353213==    by 0x4C11E3E: nss_action_parse (nss_action_parse.c:57)
==353213==    by 0x4C11E3E: __nss_action_parse (nss_action_parse.c:169)
==353213==    by 0x4C1289A: nss_database_select_default (nss_database.c:166)
==353213==    by 0x4C1289A: nss_database_reload (nss_database.c:368)
==353213==    by 0x4C1289A: nss_database_check_reload_and_get (nss_database.c:448)
==353213==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==353213==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 1,024 bytes in 1 blocks are still reachable in loss record 10 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4B3AC23: _IO_file_doallocate (filedoalloc.c:101)
==353213==    by 0x4B49D5F: _IO_doallocbuf (genops.c:347)
==353213==    by 0x4B48FDF: _IO_file_overflow@@GLIBC_2.2.5 (fileops.c:744)
==353213==    by 0x4B47754: _IO_new_file_xsputn (fileops.c:1243)
==353213==    by 0x4B47754: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1196)
==353213==    by 0x4B3C056: fwrite (iofwrite.c:39)
==353213==    by 0x49ACB44: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==353213==    by 0x49ACE9A: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==353213==    by 0x11DE90: Server::print_all() (Server.cpp:780)
==353213==    by 0x11CF4C: Server::server_loop() (Server.cpp:704)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 1,560 bytes in 1 blocks are still reachable in loss record 11 of 13
==353213==    at 0x48487A9: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4BFFF46: make_request (check_pf.c:235)
==353213==    by 0x4BFFF46: __check_pf (check_pf.c:329)
==353213==    by 0x4BC8ED0: getaddrinfo (getaddrinfo.c:2289)
==353213==    by 0x10BB92: init_socket(char*) (main.cpp:47)
==353213==    by 0x10C1B7: main (main.cpp:98)
==353213== 
==353213== 3,255 bytes in 6 blocks are still reachable in loss record 12 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x4C116BA: __nss_module_allocate (nss_module.c:88)
==353213==    by 0x4C11E3E: nss_action_parse (nss_action_parse.c:57)
==353213==    by 0x4C11E3E: __nss_action_parse (nss_action_parse.c:169)
==353213==    by 0x4C127A8: process_line (nss_database.c:232)
==353213==    by 0x4C127A8: nss_database_reload_1 (nss_database.c:294)
==353213==    by 0x4C127A8: nss_database_reload (nss_database.c:332)
==353213==    by 0x4C127A8: nss_database_check_reload_and_get (nss_database.c:448)
==353213==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==353213==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==353213==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==353213==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==353213==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==353213==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==353213==    by 0x11D167: Server::server_loop() (Server.cpp:719)
==353213==    by 0x10C1EC: main (main.cpp:100)
==353213== 
==353213== 72,704 bytes in 1 blocks are still reachable in loss record 13 of 13
==353213==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==353213==    by 0x491A9B9: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==353213==    by 0x400647D: call_init.part.0 (dl-init.c:70)
==353213==    by 0x4006567: call_init (dl-init.c:33)
==353213==    by 0x4006567: _dl_init (dl-init.c:117)
==353213==    by 0x40202E9: ??? (in /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2)
==353213==    by 0x2: ???
==353213==    by 0x1FFF0001C6: ???
==353213==    by 0x1FFF0001D0: ???
==353213==    by 0x1FFF0001D5: ???
==353213== 
==353213== LEAK SUMMARY:
==353213==    definitely lost: 0 bytes in 0 blocks
==353213==    indirectly lost: 0 bytes in 0 blocks
==353213==      possibly lost: 0 bytes in 0 blocks
==353213==    still reachable: 80,189 bytes in 22 blocks
==353213==         suppressed: 0 bytes in 0 blocks
==353213== 
==353213== For lists of detected and suppressed errors, rerun with: -s
==353213== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
