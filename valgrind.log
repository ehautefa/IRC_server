==350947== Memcheck, a memory error detector
==350947== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==350947== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==350947== Command: ./ircserv 6667 pass
==350947== Parent PID: 350937
==350947== 
==350947== 
==350947== Process terminating with default action of signal 2 (SIGINT)
==350947==    at 0x4BD0A35: write (write.c:26)
==350947==    by 0x4B46F6C: _IO_file_write@@GLIBC_2.2.5 (fileops.c:1180)
==350947==    by 0x4B48A60: new_do_write (fileops.c:448)
==350947==    by 0x4B48A60: _IO_new_do_write (fileops.c:425)
==350947==    by 0x4B48A60: _IO_do_write@@GLIBC_2.2.5 (fileops.c:422)
==350947==    by 0x4B48F42: _IO_file_overflow@@GLIBC_2.2.5 (fileops.c:783)
==350947==    by 0x49AC249: std::ostream::put(char) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==350947==    by 0x49AC7F2: std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==350947==    by 0x11E288: Server::print_all() (Server.cpp:794)
==350947==    by 0x11D170: Server::server_loop() (Server.cpp:710)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== FILE DESCRIPTORS: 6 open (3 std) at exit.
==350947== Open AF_INET socket 5: 127.0.0.1:6667 <-> unbound
==350947==    at 0x4BE35D7: accept (accept.c:26)
==350947==    by 0x11D2D3: Server::server_loop() (Server.cpp:719)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== Open AF_INET socket 4: 0.0.0.0:6667 <-> unbound
==350947==    at 0x4BE3CEB: socket (syscall-template.S:120)
==350947==    by 0x10BC2A: init_socket(char*) (main.cpp:52)
==350947==    by 0x10C1B7: main (main.cpp:98)
==350947== 
==350947== Open file descriptor 3: /home/pika/Desktop/ircserver/valgrind.log
==350947==    <inherited from parent>
==350947== 
==350947== 
==350947== HEAP SUMMARY:
==350947==     in use at exit: 80,252 bytes in 23 blocks
==350947==   total heap usage: 141 allocs, 118 frees, 108,807 bytes allocated
==350947== 
==350947== 16 bytes in 1 blocks are still reachable in loss record 1 of 14
==350947==    at 0x4849013: operator new(unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x126405: __gnu_cxx::new_allocator<pollfd>::allocate(unsigned long, void const*) (new_allocator.h:127)
==350947==    by 0x1252B1: __gnu_cxx::__alloc_traits<std::allocator<pollfd>, pollfd>::allocate(std::allocator<pollfd>&, unsigned long) (alloc_traits.h:133)
==350947==    by 0x123C0B: std::_Vector_base<pollfd, std::allocator<pollfd> >::_M_allocate(unsigned long) (stl_vector.h:346)
==350947==    by 0x121C38: std::vector<pollfd, std::allocator<pollfd> >::_M_realloc_insert(__gnu_cxx::__normal_iterator<pollfd*, std::vector<pollfd, std::allocator<pollfd> > >, pollfd const&) (vector.tcc:440)
==350947==    by 0x12003B: std::vector<pollfd, std::allocator<pollfd> >::push_back(pollfd const&) (stl_vector.h:1198)
==350947==    by 0x11D42B: Server::server_loop() (Server.cpp:728)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 32 bytes in 1 blocks are still reachable in loss record 2 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4B63DC7: __libc_dynarray_emplace_enlarge (dynarray_emplace_enlarge.c:61)
==350947==    by 0x4C0D4BC: resolv_conf_array_add__ (dynarray-skeleton.c:281)
==350947==    by 0x4C0D4BC: resolv_conf_array_add (dynarray-skeleton.c:309)
==350947==    by 0x4C0D4BC: __resolv_conf_attach (resolv_conf.c:604)
==350947==    by 0x4C08577: __res_vinit (res_init.c:632)
==350947==    by 0x4C0D9FF: maybe_init (resolv_context.c:122)
==350947==    by 0x4C0D9FF: context_get (resolv_context.c:184)
==350947==    by 0x4C0D9FF: context_get (resolv_context.c:176)
==350947==    by 0x4C0D9FF: __resolv_context_get (resolv_context.c:195)
==350947==    by 0x4BF2D55: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:213)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 63 bytes in 1 blocks are still reachable in loss record 3 of 14
==350947==    at 0x4849013: operator new(unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x49BBE7E: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_assign(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==350947==    by 0x49BC23C: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator=(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==350947==    by 0x10CD43: User::set_buffer(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >) (User.cpp:54)
==350947==    by 0x11D7A3: Server::receive() (Server.cpp:752)
==350947==    by 0x11D599: Server::server_loop() (Server.cpp:735)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 64 bytes in 1 blocks are still reachable in loss record 4 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4C11D27: __nss_action_allocate (nss_action.c:90)
==350947==    by 0x4C12254: __nss_action_parse (nss_action_parse.c:177)
==350947==    by 0x4C1289A: nss_database_select_default (nss_database.c:166)
==350947==    by 0x4C1289A: nss_database_reload (nss_database.c:368)
==350947==    by 0x4C1289A: nss_database_check_reload_and_get (nss_database.c:448)
==350947==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==350947==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 88 bytes in 1 blocks are still reachable in loss record 5 of 14
==350947==    at 0x484DA83: calloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4C0C9EE: get_locked_global (resolv_conf.c:94)
==350947==    by 0x4C0C9EE: get_locked_global (resolv_conf.c:86)
==350947==    by 0x4C0C9EE: __resolv_conf_get_current (resolv_conf.c:127)
==350947==    by 0x4C08564: __res_vinit (res_init.c:628)
==350947==    by 0x4C0D9FF: maybe_init (resolv_context.c:122)
==350947==    by 0x4C0D9FF: context_get (resolv_context.c:184)
==350947==    by 0x4C0D9FF: context_get (resolv_context.c:176)
==350947==    by 0x4C0D9FF: __resolv_context_get (resolv_context.c:195)
==350947==    by 0x4BF2D55: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:213)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 110 bytes in 1 blocks are still reachable in loss record 6 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4B640C8: __libc_alloc_buffer_allocate (alloc_buffer_allocate.c:26)
==350947==    by 0x4C0CE35: alloc_buffer_allocate (alloc_buffer.h:143)
==350947==    by 0x4C0CE35: __resolv_conf_allocate (resolv_conf.c:391)
==350947==    by 0x4C07EDA: __resolv_conf_load (res_init.c:599)
==350947==    by 0x4C0CA2E: __resolv_conf_get_current (resolv_conf.c:140)
==350947==    by 0x4C08564: __res_vinit (res_init.c:628)
==350947==    by 0x4C0D9FF: maybe_init (resolv_context.c:122)
==350947==    by 0x4C0D9FF: context_get (resolv_context.c:184)
==350947==    by 0x4C0D9FF: context_get (resolv_context.c:176)
==350947==    by 0x4C0D9FF: __resolv_context_get (resolv_context.c:195)
==350947==    by 0x4BF2D55: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:213)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 216 bytes in 1 blocks are still reachable in loss record 7 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4C12381: global_state_allocate (nss_database.c:54)
==350947==    by 0x4BE16AB: __libc_allocate_once_slow (allocate_once.c:28)
==350947==    by 0x4C12CE6: allocate_once (allocate_once.h:87)
==350947==    by 0x4C12CE6: nss_database_state_get (nss_database.c:73)
==350947==    by 0x4C12CE6: __nss_database_get (nss_database.c:471)
==350947==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==350947==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 272 bytes in 1 blocks are still reachable in loss record 8 of 14
==350947==    at 0x4849013: operator new(unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x126523: __gnu_cxx::new_allocator<User>::allocate(unsigned long, void const*) (new_allocator.h:127)
==350947==    by 0x12533B: __gnu_cxx::__alloc_traits<std::allocator<User>, User>::allocate(std::allocator<User>&, unsigned long) (alloc_traits.h:133)
==350947==    by 0x123E39: std::_Vector_base<User, std::allocator<User> >::_M_allocate(unsigned long) (stl_vector.h:346)
==350947==    by 0x121FA0: std::vector<User, std::allocator<User> >::_M_realloc_insert(__gnu_cxx::__normal_iterator<User*, std::vector<User, std::allocator<User> > >, User const&) (vector.tcc:440)
==350947==    by 0x120124: std::vector<User, std::allocator<User> >::push_back(User const&) (stl_vector.h:1198)
==350947==    by 0x11D4C9: Server::server_loop() (Server.cpp:731)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 304 bytes in 5 blocks are still reachable in loss record 9 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4C11D27: __nss_action_allocate (nss_action.c:90)
==350947==    by 0x4C12254: __nss_action_parse (nss_action_parse.c:177)
==350947==    by 0x4C127A8: process_line (nss_database.c:232)
==350947==    by 0x4C127A8: nss_database_reload_1 (nss_database.c:294)
==350947==    by 0x4C127A8: nss_database_reload (nss_database.c:332)
==350947==    by 0x4C127A8: nss_database_check_reload_and_get (nss_database.c:448)
==350947==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==350947==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 544 bytes in 1 blocks are still reachable in loss record 10 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4C116BA: __nss_module_allocate (nss_module.c:88)
==350947==    by 0x4C11E3E: nss_action_parse (nss_action_parse.c:57)
==350947==    by 0x4C11E3E: __nss_action_parse (nss_action_parse.c:169)
==350947==    by 0x4C1289A: nss_database_select_default (nss_database.c:166)
==350947==    by 0x4C1289A: nss_database_reload (nss_database.c:368)
==350947==    by 0x4C1289A: nss_database_check_reload_and_get (nss_database.c:448)
==350947==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==350947==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 1,024 bytes in 1 blocks are still reachable in loss record 11 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4B3AC23: _IO_file_doallocate (filedoalloc.c:101)
==350947==    by 0x4B49D5F: _IO_doallocbuf (genops.c:347)
==350947==    by 0x4B48FDF: _IO_file_overflow@@GLIBC_2.2.5 (fileops.c:744)
==350947==    by 0x4B47754: _IO_new_file_xsputn (fileops.c:1243)
==350947==    by 0x4B47754: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1196)
==350947==    by 0x4B3C056: fwrite (iofwrite.c:39)
==350947==    by 0x49ACB44: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==350947==    by 0x49ACE9A: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==350947==    by 0x11E0B4: Server::print_all() (Server.cpp:787)
==350947==    by 0x11D170: Server::server_loop() (Server.cpp:710)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 1,560 bytes in 1 blocks are still reachable in loss record 12 of 14
==350947==    at 0x48487A9: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4BFFF46: make_request (check_pf.c:235)
==350947==    by 0x4BFFF46: __check_pf (check_pf.c:329)
==350947==    by 0x4BC8ED0: getaddrinfo (getaddrinfo.c:2289)
==350947==    by 0x10BB92: init_socket(char*) (main.cpp:47)
==350947==    by 0x10C1B7: main (main.cpp:98)
==350947== 
==350947== 3,255 bytes in 6 blocks are still reachable in loss record 13 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x4C116BA: __nss_module_allocate (nss_module.c:88)
==350947==    by 0x4C11E3E: nss_action_parse (nss_action_parse.c:57)
==350947==    by 0x4C11E3E: __nss_action_parse (nss_action_parse.c:169)
==350947==    by 0x4C127A8: process_line (nss_database.c:232)
==350947==    by 0x4C127A8: nss_database_reload_1 (nss_database.c:294)
==350947==    by 0x4C127A8: nss_database_reload (nss_database.c:332)
==350947==    by 0x4C127A8: nss_database_check_reload_and_get (nss_database.c:448)
==350947==    by 0x4C107DB: __nss_hosts_lookup2 (XXX-lookup.c:52)
==350947==    by 0x4BF2DC0: gethostbyaddr_r@@GLIBC_2.2.5 (getXXbyYY_r.c:264)
==350947==    by 0x4BFC277: gni_host_inet_name (getnameinfo.c:249)
==350947==    by 0x4BFC277: gni_host_inet (getnameinfo.c:367)
==350947==    by 0x4BFC277: gni_host (getnameinfo.c:409)
==350947==    by 0x4BFC277: getnameinfo (getnameinfo.c:523)
==350947==    by 0x11D38B: Server::server_loop() (Server.cpp:725)
==350947==    by 0x10C1EC: main (main.cpp:100)
==350947== 
==350947== 72,704 bytes in 1 blocks are still reachable in loss record 14 of 14
==350947==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==350947==    by 0x491A9B9: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30)
==350947==    by 0x400647D: call_init.part.0 (dl-init.c:70)
==350947==    by 0x4006567: call_init (dl-init.c:33)
==350947==    by 0x4006567: _dl_init (dl-init.c:117)
==350947==    by 0x40202E9: ??? (in /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2)
==350947==    by 0x2: ???
==350947==    by 0x1FFF0001C6: ???
==350947==    by 0x1FFF0001D0: ???
==350947==    by 0x1FFF0001D5: ???
==350947== 
==350947== LEAK SUMMARY:
==350947==    definitely lost: 0 bytes in 0 blocks
==350947==    indirectly lost: 0 bytes in 0 blocks
==350947==      possibly lost: 0 bytes in 0 blocks
==350947==    still reachable: 80,252 bytes in 23 blocks
==350947==         suppressed: 0 bytes in 0 blocks
==350947== 
==350947== For lists of detected and suppressed errors, rerun with: -s
==350947== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
